from flask import Flask, jsonify, request
app = Flask(__name__)


# start server: $ FLASK_APP=test_server.py flask run
# kill server: CTRL + C
# access server:
#   http://127.0.0.1:5000/binance
#   http://127.0.0.1:5000/cex
#   etc.
# access GET request parameters: request.args.get('parameter_name'))


@app.route('/binance', methods=['GET'])
def binance():
    ans = {
        'asks': [
            ['8232.00000000', '0.03308900', []],
            ['8232.71000000', '0.14503400', []],
            ['8232.85000000', '0.02204000', []],
            ['8233.89000000', '0.03187600', []],
            ['8234.00000000', '0.55892100', []]
        ],
        'bids': [
            ['8227.19000000', '0.12155100', []],
            ['8223.00000000', '0.04624600', []],
            ['8222.05000000', '0.10474200', []],
            ['8221.00000000', '3.51179800', []],
            ['8220.85000000', '0.02429200', []]
        ],
        'lastUpdateId': 134537191
    }
    return jsonify(ans)


@app.route('/bitstamp', methods=['GET'])
def bitstamp():
    ans = {'timestamp': 1523977930,
           'bids': [
               ['8213.13', '0.02539230'],
               ['8212.00', '0.00400000'],
               ['8211.08', '0.10519000'],
               ['8210.46', '0.00300000'],
               ['8208.33', '0.00807087']
           ],
           'asks': [
               ['8217.59', '1.00000000'],
               ['8223.09', '0.98841292'],
               ['8223.73', '0.00463536'],
               ['8225.59', '0.03100000'],
               ['8225.97', '0.44000000'],
               ['8225.99', '0.01403870'],
               ['8227.65', '0.03800000']
           ]
        }
    return jsonify(ans)


@app.route('/cex/', methods=['GET'])
def cex():
    ans = {'asss': [
            [8198.2, 0.28833],
            [8198.3, 0.232],
            [8198.4, 0.29],
            [8198.7, 1.02479953],
            [8198.8, 0.62907551]
        ],
        'bids': [
            [8191.1, 0.01],
            [8191.0, 0.05750473],
            [8190.0, 0.03778389],
            [8185.1, 0.608],
            [8185.0, 0.5]
        ],
         'buy_total': '7407368.96',
         'id': 247662801,
         'pair': 'BTC:USD',
         'sell_total': '1922.86949226',
         'timestamp': 1524146822
    }
    return jsonify(ans)


@app.route('/exmo', methods=['GET'])
def exmo():
    ans = {'BTC_USD': {
                'ask': [
                    ['8201', '0.03842266', '315.10423466'],
                    ['8210', '0.08375554', '687.6329834'],
                    ['8217.96362409', '0.09389842', '771.65379991'],
                    ['8219', '0.006', '49.314'],
                    ['8220', '0.0786875', '646.81125']
                ],
                'ask_amount': '3155002.49184703',
                'ask_quantity': '261.70187575',
                'ask_top': '8201',
                'bid': [
                    ['8200', '0.014393', '118.0226'],
                    ['8198.9116391', '0.00138189', '11.329994'],
                    ['8190.47134687', '0.00728952', '59.70460469'],
                    ['8190', '0.06801086', '557.0089434'],
                    ['8188.02377917', '0.00629332', '51.5298538']
                ],
                'bid_amount': '1283958.06730371',
                'bid_quantity': '11604.60976882',
                'bid_top': '8200'}
           }
    return jsonify(ans)


@app.route('/gdax', methods=['GET'])
def gdax():
    ans = {'asks': [
              ['8203.01', '27.07370504', 8],
              ['8203.06', '0.0372', 1],
              ['8203.23', '0.5411', 1],
              ['8203.29', '3.30271343', 2],
              ['8204', '0.1', 1],
              ['8205', '0.001', 1],
              ['8205.36', '4', 1]
          ],
          'bids': [
              ['8203', '62.68847248', 57],
              ['8202.99', '0.1219', 1],
              ['8202.95', '1.21803', 1],
              ['8202.79', '0.00286604', 1],
              ['8202.5', '0.51627139', 2],
              ['8202', '3.001', 2],
              ['8201.95', '0.423829', 2],
              ['8201.64', '0.01460097', 1],
              ['8201.63', '0.039', 1],
              ['8201.58', '0.1', 1]
          ],
          'sequence': 5712176982
        }
    return jsonify(ans)


@app.route('/kucoin', methods=['GET'])
def kucoin():
    ans = {'code': 'OK',
           'data': {
               'BUY': [
                   [8203.564744, 0.04408526, 361.65628467],
                   [8203.564743, 0.00487592, 39.9999254],
                   [8203.564, 0.00192199, 15.76716797],
                   [8203.0, 0.00986834, 80.94999302],
                   [8202.49713, 0.07808183, 640.46598648]
               ],
               'SELL': [
                   [8205.061991, 0.09428359, 773.60270068],
                   [8211.0, 0.017112, 140.506632],
                   [8237.527462, 0.01374468, 113.22217896],
                   [8242.997764, 0.09994526, 823.8485547],
                   [8242.997988, 4.4772, 36905.55059187]
               ]
           },
           'msg': 'Operation succeeded.',
           'success': True,
           'timestamp': 1524147247946
           }
    return jsonify(ans)